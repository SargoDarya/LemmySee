"use strict";(self.webpackChunklemmy_gallery=self.webpackChunklemmy_gallery||[]).push([[861],{7861:(N,p,r)=>{r.r(p),r.d(p,{SearchViewComponent:()=>A});var e=r(5879),i=r(6223),C=r(3620),S=r(2181),m=r(6814),l=r(5683),d=r(2032),v=r(1993),y=r(6254);let T=(()=>{var t;class c{constructor(n){this.client=n,this.searchControl=new i.NI(""),this.searchTerm=new e.vpe,this.searchControl.valueChanges.pipe((0,C.b)(1e3),(0,S.h)(a=>!!a),(0,v.sL)()).subscribe(a=>{this.searchTerm.next(a)})}}return(t=c).\u0275fac=function(n){return new(n||t)(e.Y36(y.p))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ls-search-field"]],outputs:{searchTerm:"searchTerm"},standalone:!0,features:[e.jDz],decls:4,vars:1,consts:[["matInput","","type","text",3,"formControl"]],template:function(n,a){1&n&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"Search Communities"),e.qZA(),e._UZ(3,"input",0),e.qZA()),2&n&&(e.xp6(3),e.Q6J("formControl",a.searchControl))},dependencies:[m.ez,i.u5,i.Fj,i.JJ,i.UX,i.oH,l.lN,l.KE,l.hX,d.c,d.Nt],styles:["[_nghost-%COMP%]{display:block}"]}),c})();var o=r(5195),x=r(4190);function R(t,c){if(1&t&&e._UZ(0,"img",5),2&t){const s=e.oxw().$implicit;e.Q6J("src",s.community.icon,e.LSH)}}const Z=function(t){return["/posts","community",t]};function V(t,c){if(1&t){const s=e.EpF();e.TgZ(0,"mat-card",2),e.NdJ("click",function(){const g=e.CHM(s).$implicit,h=e.oxw(2);return e.KtG(h.selectCommunity.next(g))}),e.TgZ(1,"mat-card-header")(2,"mat-card-title-group")(3,"mat-card-title"),e._uU(4),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6),e.qZA(),e.YNc(7,R,1,1,"img",3),e.qZA()(),e.TgZ(8,"mat-card-content"),e._uU(9),e._UZ(10,"br"),e.TgZ(11,"span",4),e._uU(12),e.qZA()()()}if(2&t){const s=c.$implicit;e.Q6J("routerLink",e.VKq(6,Z,s.community.name)),e.xp6(4),e.Oqu(s.community.title),e.xp6(2),e.Oqu(s.community.actor_id),e.xp6(1),e.Q6J("ngIf",s.community.icon),e.xp6(2),e.hij(" ",s.community.description," "),e.xp6(3),e.hij("Posts: ",s.counts.posts,"")}}function w(t,c){if(1&t&&(e.ynx(0),e.YNc(1,V,13,8,"mat-card",1),e.BQk()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngForOf",s.searchResults)}}let F=(()=>{var t;class c{constructor(){this.searchResults=[],this.selectCommunity=new e.vpe}}return(t=c).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ls-search-result-view"]],inputs:{searchResults:"searchResults"},outputs:{selectCommunity:"selectCommunity"},standalone:!0,features:[e.jDz],decls:1,vars:1,consts:[[4,"ngIf"],[3,"routerLink","click",4,"ngFor","ngForOf"],[3,"routerLink","click"],["mat-card-sm-image","","class","search-result__icon",3,"src",4,"ngIf"],[1,"search-result__post-count"],["mat-card-sm-image","",1,"search-result__icon",3,"src"]],template:function(n,a){1&n&&e.YNc(0,w,2,1,"ng-container",0),2&n&&e.Q6J("ngIf",a.searchResults)},dependencies:[m.ez,m.sg,m.O5,o.QW,o.a8,o.dn,o.dk,o.vP,o.$j,o.n5,o.C1,x.rH],styles:["mat-card[_ngcontent-%COMP%]{margin:16px;cursor:pointer}"]}),c})();var u=r(1141),J=r(6668),f=r(6007),U=r(4268),O=r(4221);function Q(t,c){1&t&&e._UZ(0,"mat-progress-bar",3)}let A=(()=>{var t;class c{constructor(n){this.store=n,this.searchTerm$=this.store.select(u.p.selectSearchTerm),this.searchRequestState$=this.store.select(u.p.selectSearchRequestState),this.searchResults$=this.store.select(u.p.selectSearchResults),this.RequestStatus=U.eE}updateSearchTerm(n){this.store.dispatch(J.P.updateSearchTerm({searchTerm:n}))}}return(t=c).\u0275fac=function(n){return new(n||t)(e.Y36(O.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ls-search-view"]],standalone:!0,features:[e.jDz],decls:5,vars:6,consts:[[3,"searchTerm"],["mode","indeterminate",4,"ngIf"],[3,"searchResults"],["mode","indeterminate"]],template:function(n,a){1&n&&(e.TgZ(0,"ls-search-field",0),e.NdJ("searchTerm",function(h){return a.updateSearchTerm(h)}),e.qZA(),e.YNc(1,Q,1,0,"mat-progress-bar",1),e.ALo(2,"async"),e._UZ(3,"ls-search-result-view",2),e.ALo(4,"async")),2&n&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,a.searchRequestState$)===a.RequestStatus.Loading),e.xp6(2),e.Q6J("searchResults",e.lcZ(4,4,a.searchResults$)))},dependencies:[T,F,m.Ov,f.Cv,f.pW,m.O5],styles:["[_nghost-%COMP%]{padding:16px}"]}),c})()}}]);