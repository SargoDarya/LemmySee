"use strict";(self.webpackChunklemmy_gallery=self.webpackChunklemmy_gallery||[]).push([[861],{7861:(A,p,r)=>{r.r(p),r.d(p,{SearchViewComponent:()=>O});var e=r(5879),i=r(6223),C=r(3620),S=r(2181),l=r(6814),m=r(5683),d=r(2032),v=r(1993),y=r(6254);let T=(()=>{var t;class c{constructor(s){this.client=s,this.searchControl=new i.NI(""),this.searchTerm=new e.vpe,this.searchControl.valueChanges.pipe((0,C.b)(1e3),(0,S.h)(a=>!!a),(0,v.sL)()).subscribe(a=>{this.searchTerm.next(a)})}}return(t=c).\u0275fac=function(s){return new(s||t)(e.Y36(y.p))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ls-search-field"]],outputs:{searchTerm:"searchTerm"},standalone:!0,features:[e.jDz],decls:4,vars:1,consts:[["matInput","","type","text",3,"formControl"]],template:function(s,a){1&s&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"Search Communities"),e.qZA(),e._UZ(3,"input",0),e.qZA()),2&s&&(e.xp6(3),e.Q6J("formControl",a.searchControl))},dependencies:[l.ez,i.u5,i.Fj,i.JJ,i.UX,i.oH,m.lN,m.KE,m.hX,d.c,d.Nt],styles:["[_nghost-%COMP%]{display:block}"]}),c})();var o=r(5195);function x(t,c){if(1&t&&e._UZ(0,"img",5),2&t){const n=e.oxw().$implicit;e.Q6J("src",n.community.icon,e.LSH)}}function R(t,c){if(1&t){const n=e.EpF();e.TgZ(0,"mat-card",2),e.NdJ("click",function(){const g=e.CHM(n).$implicit,h=e.oxw(2);return e.KtG(h.selectCommunity.next(g))}),e.TgZ(1,"mat-card-header")(2,"mat-card-title-group")(3,"mat-card-title"),e._uU(4),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6),e.qZA(),e.YNc(7,x,1,1,"img",3),e.qZA()(),e.TgZ(8,"mat-card-content"),e._uU(9),e._UZ(10,"br"),e.TgZ(11,"span",4),e._uU(12),e.qZA()()()}if(2&t){const n=c.$implicit;e.xp6(4),e.Oqu(n.community.title),e.xp6(2),e.Oqu(n.community.actor_id),e.xp6(1),e.Q6J("ngIf",n.community.icon),e.xp6(2),e.hij(" ",n.community.description," "),e.xp6(3),e.hij("Posts: ",n.counts.posts,"")}}function Z(t,c){if(1&t&&(e.ynx(0),e.YNc(1,R,13,5,"mat-card",1),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.searchResults)}}let V=(()=>{var t;class c{constructor(){this.searchResults=[],this.selectCommunity=new e.vpe}}return(t=c).\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ls-search-result-view"]],inputs:{searchResults:"searchResults"},outputs:{selectCommunity:"selectCommunity"},standalone:!0,features:[e.jDz],decls:1,vars:1,consts:[[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["mat-card-sm-image","","class","search-result__icon",3,"src",4,"ngIf"],[1,"search-result__post-count"],["mat-card-sm-image","",1,"search-result__icon",3,"src"]],template:function(s,a){1&s&&e.YNc(0,Z,2,1,"ng-container",0),2&s&&e.Q6J("ngIf",a.searchResults)},dependencies:[l.ez,l.sg,l.O5,o.QW,o.a8,o.dn,o.dk,o.vP,o.$j,o.n5,o.C1],styles:["mat-card[_ngcontent-%COMP%]{margin:16px;cursor:pointer}"]}),c})();var u=r(1141),w=r(6668),f=r(6007),F=r(4268),J=r(4221);function U(t,c){1&t&&e._UZ(0,"mat-progress-bar",3)}let O=(()=>{var t;class c{constructor(s){this.store=s,this.searchTerm$=this.store.select(u.p.selectSearchTerm),this.searchRequestState$=this.store.select(u.p.selectSearchRequestState),this.searchResults$=this.store.select(u.p.selectSearchResults),this.RequestStatus=F.eE}updateSearchTerm(s){this.store.dispatch(w.P.updateSearchTerm({searchTerm:s}))}}return(t=c).\u0275fac=function(s){return new(s||t)(e.Y36(J.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ls-search-view"]],standalone:!0,features:[e.jDz],decls:5,vars:6,consts:[[3,"searchTerm"],["mode","indeterminate",4,"ngIf"],[3,"searchResults"],["mode","indeterminate"]],template:function(s,a){1&s&&(e.TgZ(0,"ls-search-field",0),e.NdJ("searchTerm",function(h){return a.updateSearchTerm(h)}),e.qZA(),e.YNc(1,U,1,0,"mat-progress-bar",1),e.ALo(2,"async"),e._UZ(3,"ls-search-result-view",2),e.ALo(4,"async")),2&s&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,a.searchRequestState$)===a.RequestStatus.Loading),e.xp6(2),e.Q6J("searchResults",e.lcZ(4,4,a.searchResults$)))},dependencies:[T,V,l.Ov,f.Cv,f.pW,l.O5],styles:["[_nghost-%COMP%]{padding:16px}"]}),c})()}}]);